{{> message}}

{{> admin-title route = 'restaurants'}}


<a href='/admin/restaurants/create'>
    <button type="button" class="btn btn-primary">New Restaurant</button>
</a>

<br />
<br />

<ul class="nav nav-pills">
    <li class="nav-item">
        <a class="nav-link {{#ifCond '' categoryId}}active{{/ifCond}}" href="?categoryId=">全部</a>
    </li>
    {{#each categories}}
    <li class="nav-item">
        <a class="nav-link {{#ifCond this.id ../categoryId}}active{{/ifCond}}"
            href="?categoryId={{this.id}}">{{this.name}}</a>
    </li>
    {{/each}}
</ul>

<br />

<table class="table align-middle">
    <thead class="thead-dark">
        <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Category</th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        {{#each restaurants as |restaurant restaurantId|}}
        <tr>
            <th scope="row">{{restaurantId}}</th>
            <td>{{restaurant.name}}</td>
            <td {{#if restaurant.Category.name}} {{else}} class="text-danger" {{/if}}>
                {{#if restaurant.Category.name}}
                    {{restaurant.Category.name}}
                {{else}}
                    尚未分類
                {{/if}}
            </td>
            <td>
                <button type="button" class="btn btn-link">
                    <a class="btn btn-link link-primary" href="/admin/restaurants/{{restaurant.id}}">
                        Show
                    </a>
                </button>
                <button type="button" class="btn btn-link">
                    <a class="btn btn-link link-primary" href="/admin/restaurants/{{restaurant.id}}/edit">
                        Edit
                    </a>
                </button>
                <form action="/admin/restaurants/{{restaurant.id}}?_method=DELETE" method="POST" style="display: inline;">
                    <button type="submit" class="btn btn-link link-danger"
                        onclick="return confirm(`確定要刪除 {{ restaurant.name }} 嗎？`)">Delete</button>
                </form>
            </td>
        </tr>
        {{/each}}
    </tbody>
</table>